@model API_PRACTICA3_MVC.Models.Post

@{
    ViewData["Title"] = "Detalle del Post";
    var usuario = ViewData["Usuario"] as API_PRACTICA3_MVC.Models.Usuario;
    var comentarios = ViewData["Comentarios"] as List<API_PRACTICA3_MVC.Models.Comentario>;
    var sentimiento = ViewData["Feedback"] as string;
}

<div class="container mt-4">
    <h2 class="mb-3">@Model.Title</h2>
    <p>@Model.Body</p>

    <hr />

    <h5 class="text-muted">Autor</h5>
    @if (usuario != null)
    {
        <p><strong>@usuario.Name</strong> - @usuario.Email</p>
    }
    else
    {
        <p class="text-danger">No se pudo cargar la informaci√≥n del autor.</p>
    }

    <hr />

    <h5 class="text-muted">Comentarios</h5>
    @if (comentarios != null && comentarios.Any())
    {
        <ul class="list-group">
            @foreach (var c in comentarios)
            {
                <li class="list-group-item">
                    <strong>@c.Name</strong>: @c.Body
                </li>
            }
        </ul>
    }
    else
    {
        <p class="text-warning">No hay comentarios disponibles.</p>
    }

    <hr />

    <h5 class="text-muted">¬øQu√© opinas de esta publicaci√≥n?</h5>
    @if (!string.IsNullOrEmpty(sentimiento))
    {
        <p class="alert alert-info">Ya registraste tu reacci√≥n: <strong>@sentimiento</strong></p>
    }
    else
    {
        <form asp-action="Reaccionar" method="post" class="d-flex gap-2">
            <input type="hidden" name="postId" value="@Model.Id" />
            <button type="submit" name="tipo" value="like" class="btn btn-success">üëç Me gust√≥</button>
            <button type="submit" name="tipo" value="dislike" class="btn btn-danger">üëé No me gust√≥</button>
        </form>
    }

    <hr />
    <a class="btn btn-secondary" asp-action="Indice">‚Üê Volver a la lista</a>
</div>
